<template name="App_result">
    <section class="overlay">
        <div id="result-viewer">
            {{#if Template.subscriptionsReady}}

            <div class="z-depth-1 top-bar">
                <h3 class="header center-align">
                    Report <br>
                    <span class="flow-text">Result of your depression test</span>
                </h3>
            </div>

            <!-- middle-bars -->
            {{> patientInfo name=session.name regno=session.regno batch=session.batch }}
            {{> allMessages messages }}
            {{> yourChoices optionList=optionList }}
            
            <div class="row z-depth-1" id="button-bar">
                <div class="col s6">
                    <a class="btn-large waves-effect red" target="_blank" href="/print/{{session._id}}">Print this Report</a>
                </div>
                <div class="col s6">
                    {{> feedback_button}}
                </div>
            </div>

            <div class="z-depth-1 bottom-bar">
                All results were based on the <a href="http://www.beckscales.com" target="_blank">Beck's Scale</a>.
                <br> We do not take any responsibility for any kind of mishaps.
            </div>

            {{else}} {{> loader }} {{/if}}
        </div>
    </section>
</template>

<template name="patientInfo">
    <div class="z-depth-1 middle-bar">
        <h5 class="header light">Patient Information</h5>
        <table>
            <tr>
                <td class="first">Name</td>
                <td>{{name}}</td>
            </tr>
            <tr>
                <td class="first">Reg. No.</td>
                <td>{{regno}}</td>
            </tr>
            <tr>
                <td class="first">Batch</td>
                <td>{{batch}}</td>
            </tr>
        </table>
    </div>
</template>

<template name="allMessages">
    <div class="z-depth-1 middle-bar">
        <h5 class="header light">Your Depression Level</h5>
        <p class="message">{{bds}}</p>
    </div>

    <div class="z-depth-1 middle-bar">
        <h5 class="header light">Your Anxiety Level</h5>
        <p class="message">{{bas}}</p>
    </div>

    <div class="z-depth-1 middle-bar">
        <h5 class="header light">Your Suicidal Tendency</h5>
        <p class="message">{{bss}}</p>
    </div>

    <div class="z-depth-1 middle-bar">
        <h5 class="header light">Your Hopelessness Scale</h5>
        <p class="message">{{bhs}}</p>
    </div>

    <div class="z-depth-1 middle-bar">
        <h5 class="header light">What To Do Next</h5>
        <ul class="collection">
            {{#each item in advices}}
            <li class="collection-item">{{item}}</li>
            {{/each}}
        </ul>
    </div>
</template>

<template name="yourChoices">
    <div class="z-depth-1 middle-bar">
        <h5 class="header light">Your Choices</h5>
        <ol class="collection">
            {{#each optionList}}
            <li class="collection-item">
                <b>{{question.title}}</b>: {{desc}}
            </li>
            {{/each}}
        </ol>
    </div>
</template>